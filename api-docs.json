{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/api/opinions/update":{"put":{"tags":["opinion-controller"],"summary":"Update opinion for customer","operationId":"updateOpinion","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpinionAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OpinionResponseDTO"}}}}}}},"/api/meals/update/{id}":{"put":{"tags":["meal-controller"],"summary":"Update a meal by id","operationId":"updateMeal","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MealAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Meal"}}}}}}},"/api/categories/update/{id}":{"put":{"tags":["category-controller"],"summary":"Update a category by id","operationId":"updateCategory","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Category"}}}}}}},"/auth/register":{"post":{"tags":["auth-controller"],"summary":"Register a new user","operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RegisterResponseDTO"}}}}}}},"/auth/password-reset":{"get":{"tags":["auth-controller"],"operationId":"resetPasswordForm","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}},"post":{"tags":["auth-controller"],"operationId":"resetPassword","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string"}},{"name":"newPassword","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/auth/login":{"post":{"tags":["auth-controller"],"summary":"Log in","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponseDTO"}}}}}}},"/auth/forgot-password":{"post":{"tags":["auth-controller"],"operationId":"forgotPassword","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/photos/upload":{"post":{"tags":["photo-controller"],"summary":"Upload a file","description":"Uploads an image file","operationId":"uploadPhoto","requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"File uploaded successfully","content":{"*/*":{"schema":{"type":"string"}}}},"400":{"description":"Invalid file","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/orders/update/{id}":{"post":{"tags":["order-controller"],"summary":"Update order","operationId":"updateOrder","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/orders/delete/{id}":{"post":{"tags":["order-controller"],"summary":"Delete order","operationId":"deleteOrder","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/orders/add":{"post":{"tags":["order-controller"],"summary":"Add new order","operationId":"addOrder","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/opinions/add":{"post":{"tags":["opinion-controller"],"summary":"Add opinion","operationId":"addOpinion","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpinionAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OpinionResponseDTO"}}}}}}},"/api/meals/add":{"post":{"tags":["meal-controller"],"summary":"Add a meal","operationId":"addMeal","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MealAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Meal"}}}}}}},"/api/categories/add":{"post":{"tags":["category-controller"],"summary":"Add a category","operationId":"addCategory","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Category"}}}}}}},"/admin/api/config/initialize-system":{"post":{"tags":["config-controller"],"summary":"Initialize system","operationId":"initializeSystem","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfigAddCommand"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/photos/download":{"get":{"tags":["photo-controller"],"summary":"Download a photo","description":"Download a photo from the server","operationId":"downloadPhoto","parameters":[{"name":"filename","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}}}}},"/api/orders/get/{id}":{"get":{"tags":["order-controller"],"summary":"Get order by id","operationId":"getOrderById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"default":{"description":"Returns an order with a given id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}}}}},"/api/orders/all":{"get":{"tags":["order-controller"],"summary":"Get all orders","operationId":"getAllOrders","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/opinions/meal/{mealId}":{"get":{"tags":["opinion-controller"],"summary":"Get opinions for meal","operationId":"getOpinionsForMeal","parameters":[{"name":"mealId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OpinionResponseDTO"}}}}}}}},"/api/opinions/customer/{customerId}":{"get":{"tags":["opinion-controller"],"summary":"Get opinions for customer","operationId":"getOpinionsForCustomer","parameters":[{"name":"customerId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OpinionResponseDTO"}}}}}}}},"/api/opinions/average-rating/{mealId}":{"get":{"tags":["opinion-controller"],"summary":"Get average rating for meal","operationId":"getAverageRating","parameters":[{"name":"mealId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"number","format":"double"}}}}}}},"/api/meals/search":{"get":{"tags":["meal-controller"],"summary":"Search meals by name","operationId":"searchMealsByName","parameters":[{"name":"name","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/meals/get/{id}":{"get":{"tags":["meal-controller"],"summary":"Get meal by id","operationId":"getMealById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Meal"}}}}}}},"/api/meals/get-meals/{categoryId}":{"get":{"tags":["meal-controller"],"summary":"Get all meals with a given category id","operationId":"getMealsByCategory","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Meal"}}}}}}}},"/api/meals/all":{"get":{"tags":["meal-controller"],"summary":"Get all meals","operationId":"getAllMeals","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Meal"}}}}}}}},"/api/categories/get/{id}":{"get":{"tags":["category-controller"],"summary":"Get category by id","operationId":"getCategoryById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Category"}}}}}}},"/api/categories/all":{"get":{"tags":["category-controller"],"summary":"Get all categories","operationId":"getAllCategories","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Category"}}}}}}}},"/admin/api/config":{"get":{"tags":["config-controller"],"summary":"Get config","operationId":"getConfig","responses":{"200":{"description":"Returns the configuration of the system","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Config"}}}}}},"delete":{"tags":["config-controller"],"summary":"Remove config, delivery prices and opening hours, only for testing purposes","operationId":"removeConfigs","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/admin/api/config/opening-hours":{"get":{"tags":["config-controller"],"summary":"Get opening hours","operationId":"getOpeningHours","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OpeningHour"}}}}}}}},"/admin/api/config/delivery-prices":{"get":{"tags":["config-controller"],"summary":"Get delivery prices","operationId":"getDeliveryPrices","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DeliveryPricing"}}}}}}}},"/api/meals/delete/{id}":{"delete":{"tags":["meal-controller"],"summary":"Delete a meal by id","operationId":"deleteMealById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/meals/delete-meals/{categoryId}":{"delete":{"tags":["meal-controller"],"summary":"Delete all meals with a given category id","operationId":"deleteAllMealsByCategory","parameters":[{"name":"categoryId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/categories/delete/{id}":{"delete":{"tags":["category-controller"],"summary":"Delete a category by id","operationId":"deleteCategoryById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"OpinionAddCommand":{"required":["customerId","mealId"],"type":"object","properties":{"mealId":{"type":"integer","format":"int64"},"customerId":{"type":"integer","format":"int64"},"rating":{"maximum":5,"minimum":1,"type":"integer","format":"int32"},"comment":{"type":"string"}}},"OpinionResponseDTO":{"type":"object","properties":{"customerId":{"type":"integer","format":"int64"},"rating":{"type":"integer","format":"int32"},"comment":{"type":"string"}}},"MealAddCommand":{"required":["categoryId","name","price"],"type":"object","properties":{"name":{"type":"string"},"price":{"type":"number","format":"double"},"photographUrl":{"type":"string"},"ingredients":{"type":"array","items":{"type":"string"}},"weightOrVolume":{"type":"number","format":"double"},"unitType":{"type":"string","enum":["GRAMY","MILILITRY"]},"categoryId":{"type":"integer","format":"int64"},"allergens":{"type":"array","items":{"type":"string"}},"calories":{"type":"integer","format":"int32"}}},"Meal":{"required":["categoryId","name"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"price":{"type":"number","format":"double"},"photographUrl":{"type":"string"},"ingredients":{"type":"array","items":{"type":"string"}},"weightOrVolume":{"type":"number","format":"double"},"unitType":{"type":"string","enum":["GRAMY","MILILITRY"]},"categoryId":{"type":"integer","format":"int64"},"allergens":{"type":"array","items":{"type":"string"}},"calories":{"type":"integer","format":"int32"},"unitTypeMandatory":{"type":"boolean"}},"description":"Model of a meal"},"CategoryAddCommand":{"required":["name"],"type":"object","properties":{"name":{"type":"string"},"photographUrl":{"type":"string"}}},"Category":{"required":["name"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"photographUrl":{"type":"string"}},"description":"Model of a category"},"RegisterUserCommand":{"required":["email","name","password","phone","surname"],"type":"object","properties":{"name":{"type":"string"},"surname":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"password":{"type":"string"},"admin":{"type":"boolean"}}},"RegisterResponseDTO":{"type":"object","properties":{"customerId":{"type":"integer","format":"int64"},"name":{"type":"string"},"surname":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"}}},"LoginCommand":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"LoginResponseDTO":{"type":"object","properties":{"token":{"type":"string"},"customerId":{"type":"integer","format":"int64"},"customerName":{"type":"string"},"customerSurname":{"type":"string"},"customerEmail":{"type":"string"},"isAdmin":{"type":"boolean"}}},"Order":{"required":["dateTime","mealIds","status","type"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"mealIds":{"type":"array","items":{"type":"integer","format":"int64"}},"totalPrice":{"type":"number","format":"double"},"customerId":{"type":"integer","format":"int64"},"type":{"type":"string","enum":["DOSTAWA","NA_MIEJSCU"]},"status":{"type":"string","enum":["OCZEKUJĄCE","W_TRAKCIE_REALIZACJI","GOTOWE","W_DOSTRACZENIU","DOSTARCZONE","ODRZUCONE"]},"dateTime":{"type":"string","format":"date-time"}}},"OrderAddCommand":{"required":["mealIds","status","type"],"type":"object","properties":{"mealIds":{"type":"array","items":{"type":"integer","format":"int64"}},"customerId":{"type":"integer","format":"int64"},"type":{"type":"string","enum":["DOSTAWA","NA_MIEJSCU"]},"status":{"type":"string","enum":["OCZEKUJĄCE","W_TRAKCIE_REALIZACJI","GOTOWE","W_DOSTRACZENIU","DOSTARCZONE","ODRZUCONE"]}}},"ConfigAddCommand":{"required":["city","email","logoUrl","phoneNumber","postalCode","restaurantName","street"],"type":"object","properties":{"restaurantName":{"type":"string","description":"Name of the restaurant","example":"Restauracja pod niebem"},"postalCode":{"type":"string","description":"Postal code of the restaurant","example":"00-000"},"city":{"type":"string","description":"City of the restaurant","example":"Warszawa"},"street":{"type":"string","description":"Street of the restaurant","example":"ul. Marszałkowska 1"},"phoneNumber":{"type":"string","description":"Phone number of the restaurant","example":"123456789"},"email":{"type":"string","description":"Email of the restaurant","example":"abc@wp.pl"},"logoUrl":{"type":"string","description":"URL for the logo","example":"https://www.creativefabrica.com/wp-content/uploads/2018/10/Chef-restaurant-logo-by-DEEMKA-STUDIO-4.jpg"},"openingHours":{"type":"array","description":"Opening hours of the restaurant","example":[{"day":"MONDAY","openingTime":"10:00","closingTime":"22:00"},{"day":"TUESDAY","openingTime":"11:00","closingTime":"22:00"},{"day":"WEDNESDAY","openingTime":"12:00","closingTime":"22:00"},{"day":"THURSDAY","openingTime":"13:00","closingTime":"22:00"},{"day":"FRIDAY","openingTime":"14:00","closingTime":"22:00"},{"day":"SATURDAY","openingTime":"15:00","closingTime":"22:00"},{"day":"SUNDAY","openingTime":"16:00","closingTime":"22:00"}],"items":{"$ref":"#/components/schemas/OpeningHour"}},"deliveryPricings":{"type":"array","description":"Delivery prices of the restaurant","example":[{"maximumRange":1,"price":5.99},{"maximumRange":5,"price":5.99},{"maximumRange":10,"price":5.99}],"items":{"$ref":"#/components/schemas/DeliveryPricing"}}}},"DeliveryPricing":{"required":["maximumRange","price"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"maximumRange":{"type":"integer","format":"int32"},"price":{"type":"number","format":"double"}},"description":"Delivery prices of the restaurant","example":[{"maximumRange":1,"price":5.99},{"maximumRange":5,"price":5.99},{"maximumRange":10,"price":5.99}]},"LocalTime":{"type":"object","properties":{"hour":{"type":"integer","format":"int32"},"minute":{"type":"integer","format":"int32"},"second":{"type":"integer","format":"int32"},"nano":{"type":"integer","format":"int32"}}},"OpeningHour":{"required":["closingTime","day","openingTime"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"day":{"type":"string","enum":["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"]},"openingTime":{"$ref":"#/components/schemas/LocalTime"},"closingTime":{"$ref":"#/components/schemas/LocalTime"}},"description":"Opening hours of the restaurant","example":[{"day":"MONDAY","openingTime":"10:00","closingTime":"22:00"},{"day":"TUESDAY","openingTime":"11:00","closingTime":"22:00"},{"day":"WEDNESDAY","openingTime":"12:00","closingTime":"22:00"},{"day":"THURSDAY","openingTime":"13:00","closingTime":"22:00"},{"day":"FRIDAY","openingTime":"14:00","closingTime":"22:00"},{"day":"SATURDAY","openingTime":"15:00","closingTime":"22:00"},{"day":"SUNDAY","openingTime":"16:00","closingTime":"22:00"}]},"Config":{"required":["city","email","logoUrl","phoneNumber","postalCode","restaurantName","street"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"restaurantName":{"type":"string","description":"Name of the restaurant","example":"Restauracja pod niebem"},"postalCode":{"type":"string","description":"Postal code of the restaurant","example":"60-123"},"city":{"type":"string","description":"City of the restaurant","example":"Warszawa"},"street":{"type":"string","description":"Street of the restaurant","example":"ul. Marszałkowska 1"},"phoneNumber":{"type":"string","description":"Phone number of the restaurant","example":"123456789"},"email":{"type":"string","description":"Email of the restaurant","example":"abc@wp.pl"},"logoUrl":{"type":"string","description":"URL for the logo","example":"https://www.creativefabrica.com/wp-content/uploads/2018/10/Chef-restaurant-logo-by-DEEMKA-STUDIO-4.jpg"}}}}}}